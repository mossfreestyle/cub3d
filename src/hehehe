# TODO Cub3D - Suivi de la progression dÃ©taillÃ©

---

## ğŸŸ¢ PARSING

### âœ… DÃ©jÃ  fait
- Lecture du fichier map avec GNL
- Parsing des textures et couleurs (NO, SO, WE, EA, F, C)
- VÃ©rification de lâ€™unicitÃ© des textures et couleurs
- VÃ©rification de lâ€™extension `.xpm` pour les textures
- VÃ©rification que la map est le dernier Ã©lÃ©ment du fichier
- Gestion des lignes vides dans la map
- Extraction du bloc de map contenant le joueur (`add_tmp`)
- VÃ©rification du nombre de joueurs (exactement 1)
- RÃ©cupÃ©ration de la position et de la direction du joueur
- VÃ©rification des caractÃ¨res valides dans la map
- Remplissage des espaces vides par un caractÃ¨re spÃ©cifique (`X`)
- VÃ©rification que la map est bien fermÃ©e par des murs (`check_is_closed`)
- Gestion des erreurs et libÃ©ration mÃ©moire

### ğŸŸ¡ Ã€ faire / Ã€ amÃ©liorer

#### ğŸ”¸ Robustesse parsing
- [ ] **VÃ©rifier que le joueur nâ€™est pas sur un bord de la map**  
  â†’ Le joueur ne doit jamais Ãªtre placÃ© sur la premiÃ¨re/derniÃ¨re ligne ou colonne.
- [ ] **VÃ©rifier que le joueur ne touche pas un espace ou un bord**  
  â†’ Les cases autour du joueur doivent Ãªtre des murs ou des cases valides.
- [ ] **VÃ©rifier lâ€™existence rÃ©elle des fichiers de textures**  
  â†’ Ouvrir chaque chemin, vÃ©rifier lâ€™accessibilitÃ©, et que le fichier est bien un `.xpm`.
- [ ] **GÃ©rer les erreurs de format RGB**  
  â†’ VÃ©rifier quâ€™il y a bien 3 valeurs, sÃ©parÃ©es par des virgules, toutes entre 0 et 255, pas de doubles virgules, pas de caractÃ¨res non numÃ©riques.
- [ ] **GÃ©rer les doublons de textures/couleurs**  
  â†’ Chaque identifiant (NO, SO, WE, EA, F, C) doit apparaÃ®tre une seule fois.
- [ ] **GÃ©rer les cas limites**  
  â†’ Map non rectangulaire, lignes trÃ¨s longues, caractÃ¨res inattendus, plusieurs blocs de map, etc.
- [ ] **Ajouter des messages dâ€™erreur plus prÃ©cis**  
  â†’ Indiquer la ligne et la nature exacte de lâ€™erreur.
- [ ] **Nettoyer et commenter le code pour la relecture finale**

#### ğŸ”¸ Bonus parsing (optionnel)
- [ ] **Supporter les maps avec plusieurs blocs sÃ©parÃ©s par des lignes vides**  
  â†’ Sâ€™assurer que seul le bloc contenant le joueur est gardÃ©.
- [ ] **VÃ©rifier que la map ne contient pas de caractÃ¨res interdits mÃªme dans les lignes vides**

---

## ğŸŸ¦ EXECUTION / RAYCASTING

### âœ… DÃ©jÃ  fait
- Initialisation de la fenÃªtre et de la structure MLX
- Initialisation des structures player, map, assets, key, ray
- Hook clavier pour les dÃ©placements de base (WASD, ESC)
- DÃ©placement du joueur dans la map (move)
- DÃ©but du raycasting (fonction DDA prÃ©sente)

### ğŸŸ¡ Ã€ faire / Ã€ amÃ©liorer

#### ğŸ”¸ Affichage et moteur
- [ ] **Affichage des murs avec textures**  
  â†’ Charger les fichiers `.xpm`, appliquer la texture sur les murs selon la direction du rayon.
- [ ] **Affichage du sol et du plafond**  
  â†’ Colorier les pixels du sol et du plafond selon la couleur dÃ©finie dans la map.
- [ ] **Gestion correcte des collisions avec les murs et les espaces vides**  
  â†’ EmpÃªcher le joueur de traverser les murs ou les cases remplies (`X`).
- [ ] **Gestion de la rotation du joueur (gauche/droite)**  
  â†’ Modifier lâ€™angle de vue avec les touches ou la souris.
- [ ] **Gestion des angles et du FOV**  
  â†’ Sâ€™assurer que le rendu respecte bien le champ de vision.
- [ ] **Optimisation du raycasting**  
  â†’ Correction du fish-eye, gestion des distances, optimisation des calculs.
- [ ] **Gestion de la fermeture propre de la fenÃªtre (croix, ESC)**
- [ ] **Gestion des erreurs lors du chargement des textures**

#### ğŸ”¸ Bonus exÃ©cution (optionnel)
- [ ] **Effets visuels (shading, animation, etc.)**
- [ ] **Affichage dâ€™un HUD minimal**

---

## â­ï¸ BONUS

### ğŸŸ¡ Ã€ faire

#### ğŸ”¸ Mini-map
- [ ] **Affichage dâ€™une mini-map Ã  lâ€™Ã©cran**  
  â†’ Vue du dessus, position du joueur, murs, direction du regard.

#### ğŸ”¸ Collisions avancÃ©es
- [ ] **Collision prÃ©cise avec les murs**  
  â†’ EmpÃªcher le joueur de traverser les murs mÃªme en diagonale ou en glissant sur les bords.

#### ğŸ”¸ Mouvement de la souris
- [ ] **Gestion du mouvement de la souris pour tourner la vue**  
  â†’ Capter les mouvements horizontaux de la souris pour faire tourner la camÃ©ra.

#### ğŸ”¸ (Optionnel)
- [ ] **Portes, objets interactifs, HUD avancÃ©, sons, etc.**

---

## ğŸ“ RÃ©capitulatif progression

- **Parsing** : 75%  
  (reste surtout la robustesse, les checks de bord, et la gestion des erreurs fines)
- **Raycasting/exÃ©cution** : 40%  
  (base posÃ©e, reste lâ€™affichage textures, collisions, et la gestion fine du moteur)
- **Bonus** : 0%  
  (Ã  commencer aprÃ¨s le core)

---

**Prochaines Ã©tapes recommandÃ©es** :
1. Finaliser la robustesse du parsing (tous les checks du sujet, gestion des erreurs)
2. Terminer lâ€™affichage raycasting avec textures et collisions
3. Ajouter la mini-map et la gestion souris pour le bonus

---